<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="shortcut icon" href="#">
  <meta charset="UTF-8">
  <title>ModuNUS</title>

  <link rel='stylesheet' href='https://ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="./style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=B612|Karla:700|Muli|Nunito|Open+Sans&display=swap"
    rel="stylesheet">

  <style>
    body {
      font-family: 'Nunito', 'Open Sans', Arial, Helvetica, sans-serif;
    }

    .column {
      float: left;
      padding: 10px;
    }

    .left {
      width: 78%;
      padding-right: 20px;
      border-right: 0.25px solid gray;
    }

    .right {
      width: 22%;
      padding-left: 20px;
    }

    .row:after {
      content: "";
      display: table;
      clear: both;
    }

    .filter-box .fa {
      font-size: 20px;
      cursor: pointer;
      user-select: none;
    }

    #thehr {
      margin-top: 0.1em;
    }
  </style>
</head>

<body>
  <main ng-app="myApp" ng-cloak>
    <section ng-controller="myCtrl">
      <div class="filter">
          <h2><b>Filters</b><br></h2>
            <div style="font-size: 12px">{{filterCount()}} filter(s) selected.<button ng-click="clearFilters()"
              style="font-size: 12px; color: green; float: right;">Clear all filters</button></div>
        <hr id = "thehr"/>
        <menu class="filter-box" ng-repeat="cat in categories" ng-init="filter[cat]={}">
          <button
            ng-click="toggle = !toggle" ng-init="toggle = false" style = "width: 93%; text-align: left">{{capitalise(cat)}}</button><i ng-click="toggle = !toggle" ng-class="toggle ? 'fa fa-angle-down' : 'fa fa-angle-right'" style = "float: right"></i>
          <div class='hr'>
            <div ng-show="toggle">
              <md-item ng-repeat="value in getItems(cat, data)" ng-hide="numFiltered(cat,value) === 0">
                <form class="checkbox">
                  <label><input type="checkbox" ng-model="filter[cat][value]" ng-change="backToFirstPage()">
                    <span class="underline_hover disable-select">{{filterNames(value)}}
                      ({{numFiltered(cat, value)}})</span>
                  </label>
                </form>
              </md-item>
            </div>
          </div>
          <hr>
        </menu>
        <menu class="filter-box" ng-init="filter['pass/fail']={}">
          <button
            ng-click="toggle2 = !toggle2" ng-init = "toggle2 = false" style = "width: 93%; text-align: left">{{capitalise('pass/fail')}}</button><i ng-click="toggle2 = !toggle2" ng-class="toggle2 ? 'fa fa-angle-down' : 'fa fa-angle-right'" style = "float: right"></i>
          <div class='hr'>
            <div ng-show="toggle2">
              <md-item ng-repeat="value in getItems('pass/fail', data)" ng-hide="numFiltered('pass/fail',value) === 0">
                <form class="checkbox">
                  <label><input type="checkbox" ng-model="filter['pass/fail'][value]" ng-change="backToFirstPage()">
                    <span class="underline_hover disable-select">{{value === true ? "No" : "Yes"}}
                      ({{numFiltered("pass/fail", value)}})</span>
                  </label>
                </form>
              </md-item>
            </div>
          </div>
        </menu>
      </div>
      <div class="container" style="padding:0px 0px 150px 250px;">
        <div class="header_background">
          <h2><b>Search for GEMs</b></h2>
          <form role="form">
            <div class="search">
              <input ng-model="searchText" class="form-control input-lg" id="txt-search"
                placeholder="Type your module code/name" ng-change="backToFirstPage()">
            </div>
          </form>
        </div>
        <article class="box">
          {{filtered.length | number}} module(s) found.<br><span ng-hide="filtered.length === 0">Displaying
            {{rangeCount(page)}} - {{rangeCountEnd(filtered.length)}}<span
              style="text-align: right; display: block">Page
              {{page}} of {{totalPageNum(filtered.length / 10)}}</span></span>
          <br>
          <br>
          <p class="moduleinfo"
            ng-repeat="item in filtered=(data | filter:filterByPropertiesMatchingAND | filter:search)">
            <div dir-paginate="item in filtered|itemsPerPage:10" current-page="page">
              <div class="row">
                <div class="column left">
                  <a ng-href="index2.php?code={{item.moduleCode}}&title={{item.title | encodeURIComponent}}&depmt={{item.department}}&desc={{item.description | encodeURIComponent}}&webcasts={{item.webcasts}}&exams={{item.exams}}&tutorials={{item.tutorials}}&projects={{item.projects}}&su={{!item.hasOwnProperty('attributes')}}&semester={{semesterFunc(item.semesterData)}}"
                    style="color: #ff4500" class="header"><b>{{item.moduleCode}} - {{item.title}}</b></a><br>
                  Category: {{item.department}}<br>
                  Semester(s): {{semesterFunc(item.semesterData)}} <br><br>
                  {{item.description}}
                  <br>
                  <br>
                  <a href="https://nusmods.com/modules/{{item.moduleCode}}/{{item.title}}" target="_blank">NUSMods</a> /
                  <a href="https://ivle.nus.edu.sg/v1/lms/public/list_course_public.aspx?code={{item.moduleCode}}&title=&lecName=&acadyear=&semester=&ModTitleExact=Y&LecNameExact=N"
                    target="_blank">IVLE</a> / <a href="https://www.google.com/search?q={{item.moduleCode}}"
                    target="_blank">Google</a></div>
                <div class="column right">
                  <span style='border-radius: 25px; background: lightgreen; padding: 10px'><i class = 'fa fa-video'></i> Webcasts
                    <i ng-class="item.webcasts ? 'fa fa-check' : 'fa fa-times'"></i></span><br><br>
                  <span style='border-radius: 25px; background: lightblue; padding: 10px'><i class = 'fa fa-book'></i> Exams
                    <i ng-class="item.exams ? 'fa fa-check' : 'fa fa-times'"></i></span><br><br>
                  <span style='border-radius: 25px; background: lightsalmon; padding: 10px'><i class = 'fa fa-comments'></i> Tutorials
                    <i ng-class="item.tutorials ? 'fa fa-check' : 'fa fa-times'"></i></span><br><br>
                  <span style='border-radius: 25px; background: lightpink; padding: 10px'><i class = 'fa fa-users'></i> Group
                    Projects <i ng-class="item.projects ? 'fa fa-check' : 'fa fa-times'"></i></span><br><br>
                  <span style='border-radius: 25px; background: palegoldenrod; padding: 10px'><i class = 'far fa-smile'></i> Pass/Fail Option
                    <i ng-class="!item.hasOwnProperty('attributes') ? 'fa fa-check' : 'fa fa-times'"></i></span><br><br>
                </div>
              </div>
              <hr>
            </div>
          </p>
          <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" on-page-change="scroll()">
          </dir-pagination-controls>
        </article>
    </section>
    </div>
  </main>
  <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.js'></script>
  <script src="https://cdn.jsdelivr.net/gh/michaelbromley/angularUtils/src/directives/pagination/dirPagination.js"
    type="text/javascript"></script>

  <script src="./script.js"></script>
  </mat-sidenav-content>

</body>

</html>
